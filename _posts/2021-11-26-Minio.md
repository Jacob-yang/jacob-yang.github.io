## 1.使用

### windows使用minio

## 2.整合Springboot

1. 在pom.xml中导入包(自己封装的jar,地址https://github.com/Jacob-yang/jacobyang-tools/packages/979768)

   ```xml
   <dependency>
   <groupId>com.jacobyang</groupId>
   <artifactId>jacobyang-tool-minio</artifactId>
   <version>1.0</version>
   </dependency>
   ```

2. application.yml

   ```yml
   minio:
        url: http://127.0.0.1:9000
        accessKey: minioadmin
        secretKey: minioadmin
        #这个用来访问图片用的
        openUrl: http://127.0.0.1:9000
        #bucket名称不能使用特殊符号包括_下划线
        bucket: pic 
   ```

3. controller使用

   ```java
   @RestController
      @RequestMapping("/api/upload")
      public class MinioApi {
      
          @Autowired
          private MinioUtils minioUtils;
      
          @PostMapping(value = "/img")
          public Object upload(MultipartHttpServletRequest req) {
              Map<String, MultipartFile> fileMap = req.getFileMap();
              // 循环遍历，取出单个文件
              List<String> list = new ArrayList<>();
              for (Map.Entry<String, MultipartFile> entity : fileMap.entrySet()) {
                  // 获取单个文件
                  MultipartFile file = entity.getValue();
                  try {
                       //文件流,桶（已经在yml中配置）,文件名,false不生成缩略图/true生成缩略图
                      String s = minioUtils.uploadFile(file.getInputStream(), null, file.getOriginalFilename(), false);
                      list.add(s);
                  } catch (IOException e) {
                      e.printStackTrace();
                  }
              }
              return list;
          }     
      
          @PostMapping(value = "/del")
          public Object delFile(String url) {
              return minioUtils.removeFile(url);
          }
      
          @GetMapping(value = "/download")
          public void download(HttpServletResponse response, String url) {
               minioUtils.downloadFile(response.getOutputStream(),url);
          }
     }
   ```

   